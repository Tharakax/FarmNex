<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmNex PDF Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <h1>FarmNex PDF Generation Test</h1>
    <button onclick="generateTestPDF()">Generate Test PDF with Logo</button>
    
    <script>
        // Simplified version of the FarmNex logo function for testing
        const drawFarmNexLogo = (pdf, x, y, size = 30, onWhiteBackground = false) => {
            // Logo dimensions
            const leafWidth = size;
            const leafHeight = size * 1.2;
            
            // Colors
            const leafColor = [34, 197, 94]; // Green
            const stemColor = [22, 163, 74]; // Darker green
            
            // Draw leaf shape (simplified)
            pdf.setFillColor(...leafColor);
            
            // Create a simple leaf shape using triangle
            const leafPoints = [
                [x, y + leafHeight * 0.8],
                [x + leafWidth * 0.5, y],
                [x + leafWidth, y + leafHeight * 0.5],
                [x + leafWidth * 0.5, y + leafHeight]
            ];
            
            // Draw as a path
            pdf.triangle(x, y + leafHeight * 0.8, 
                        x + leafWidth * 0.5, y, 
                        x + leafWidth, y + leafHeight * 0.5, 'F');
            
            // Draw stem
            pdf.setFillColor(...stemColor);
            pdf.rect(x + leafWidth * 0.45, y + leafHeight * 0.8, 2, leafHeight * 0.15, 'F');
        };
        
        function generateTestPDF() {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');
            
            const pageWidth = pdf.internal.pageSize.getWidth();
            const pageHeight = pdf.internal.pageSize.getHeight();
            
            // Header with logo
            pdf.setFillColor(22, 163, 74); // Green header
            pdf.rect(0, 0, pageWidth, 60, 'F');
            
            // White logo area
            pdf.setFillColor(255, 255, 255);
            pdf.roundedRect(15, 8, 80, 22, 4, 4, 'F');
            
            // Draw logo on white background
            drawFarmNexLogo(pdf, 20, 9, 16, true);
            
            // Company name
            pdf.setFontSize(14);
            pdf.setTextColor(22, 163, 74);
            pdf.setFont('helvetica', 'bold');
            pdf.text('FarmNex', 50, 20, { align: 'center' });
            
            // Title
            pdf.setFontSize(22);
            pdf.setTextColor(255, 255, 255);
            pdf.text('FARM MANAGEMENT SYSTEM', pageWidth / 2, 35, { align: 'center' });
            
            pdf.setFontSize(16);
            pdf.text('Test Report with Logo', pageWidth / 2, 50, { align: 'center' });
            
            // Sample content
            pdf.setFontSize(12);
            pdf.setTextColor(0, 0, 0);
            pdf.text('This is a test PDF showing the FarmNex logo integration.', 15, 80);
            pdf.text('The logo appears in the header on a white background.', 15, 95);
            
            // Footer with small logo
            drawFarmNexLogo(pdf, 15, pageHeight - 18, 8, false);
            pdf.setFontSize(8);
            pdf.setTextColor(107, 114, 128);
            pdf.text('FarmNex Farm Management System', 30, pageHeight - 8);
            pdf.text(`Generated: ${new Date().toLocaleString()}`, pageWidth - 15, pageHeight - 8, { align: 'right' });
            
            // Save the PDF
            pdf.save('FarmNex_Test_Report_With_Logo.pdf');
        }
    </script>
</body>
</html>